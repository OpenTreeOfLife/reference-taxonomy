#!/bin/bash

[ $# -eq 3 ] || (echo "Arg count $#, wanted 3"; exit 1)

resource=$1
version=$2
suffix=$3

set -e

debug=
#debug=echo

# This assumes you've set up your .ssh/config with a 'files' host
host=files

# Location of http root on remote host
repo=files.opentreeoflife.org

# Local directory containins tarballs
tardir=archive/$resource/$version

remotedir=$repo/$resource/$version

file=$version$suffix

echo Copying $tardir/$file to $host:$remotedir/$file

$debug ssh $host mkdir -p $remotedir
$debug scp -p $tardir/$file $host:$remotedir/$file

