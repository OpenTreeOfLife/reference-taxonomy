#!/bin/bash

[ $# -eq 4 ] || (echo "Arg count $#, wanted 4"; exit 1)

archive=$1
resource=$2
version=$3
suffix=$4

set -e

debug=
#debug=echo

# This assumes you've set up your .ssh/config with a 'files' host
host=files

# Location of http root on remote host
repo=files.opentreeoflife.org

# Local directory containins tarballs
tardir=$archive/$resource/$version

remotedir=$repo/$resource/$version

file=$version$suffix

echo Copying $tardir/$file to $host:$remotedir/$file

$debug ssh $host mkdir -p $remotedir
$debug scp -p $tardir/$file $host:$remotedir/$file

